/* ============================================
   IMPRESS MODE: Activated via body.impress-enabled
   Class is set by setup/main.ts
   ============================================ */

/* --- Viewport: Fullscreen, overflow hidden --- */
.impress-viewport {
  position: fixed !important;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 100;
}

/* --- Root: Controls Scale + Perspective --- */
.impress-root {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  transform-origin: top left;
  transform-style: preserve-3d;
  transition: all 0ms ease-in-out;
}

/* --- Canvas (#slideshow): Controls Rotate + Translate --- */
body.impress-enabled #slideshow {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 0 !important;
  height: 0 !important;
  transform-origin: top left;
  transform-style: preserve-3d;
  transition: all 0ms ease-in-out;
  overflow: visible !important;
}

/* --- Each Step: Absolutely positioned with 3D Transform --- */
body.impress-enabled #slideshow > .slidev-page {
  position: absolute !important;
  inset: auto !important;
  top: auto !important;
  left: auto !important;
  right: auto !important;
  bottom: auto !important;
  transform-style: preserve-3d;
  /* CRITICAL: Must be center (default) -- Slidev sets top-left which breaks
     the translate(-50%,-50%) centering when rotation/scale are involved */
  transform-origin: 50% 50% !important;
  opacity: 0.3;
  transition: opacity 1000ms;
  width: 1024px !important;
  height: 768px !important;
  overflow: hidden;
  /* Override Slidev's scale property */
  scale: 1 !important;
}

/* --- Force all slides visible (override v-show) --- */
body.impress-enabled #slideshow > .slidev-page {
  display: block !important;
}

/* --- Active Step --- */
body.impress-enabled #slideshow > .slidev-page.impress-active {
  opacity: 1;
}

/* --- Present Step (for slide-internal animations) --- */
body.impress-enabled #slideshow > .slidev-page.impress-present {
  /* Class for CSS selectors in slide styles */
}

/* --- "slide" class: Classic slide appearance --- */
body.impress-enabled .impress-slide {
  background-color: white;
  border: 1px solid rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  padding: 40px 60px;
  box-sizing: border-box;
}

/* --- Theme branding hidden in impress mode --- */
body.impress-enabled .ia-branding {
  display: none !important;
}

/* --- Slidev layout background transparent only when impress has opaque background --- */
body.impress-opaque-bg .slidev-layout {
  background: transparent !important;
  background-color: transparent !important;
}

/* --- Reduce layout padding for impress (non-slide) steps to fit 900px content --- */
body.impress-enabled .slidev-layout.ia-default {
  padding: 40px 30px 30px 30px !important;
}

/* --- For impress-slide steps, keep tighter padding for card appearance --- */
body.impress-enabled .impress-slide .slidev-layout.ia-default {
  padding: 20px 10px 10px 10px !important;
}

/* --- GPU optimization --- */
body.impress-enabled .impress-root,
body.impress-enabled #slideshow {
  will-change: transform;
}

/* --- Keep Slidev controls above impress viewport --- */
body.impress-enabled #page-root {
  position: relative;
  z-index: 200;
  pointer-events: none;
  background: transparent !important;
}
/* Make slide container and content transparent so impress shows through */
body.impress-enabled #slide-container {
  background: transparent !important;
  pointer-events: none;
}
body.impress-enabled .slidev-slide-content {
  visibility: hidden !important;
  pointer-events: none;
}
/* Re-enable pointer events on all interactive UI (NavControls, Overview, Drawing, etc.) */
body.impress-enabled #slide-container > :not(.slidev-slide-content),
body.impress-enabled #page-root > :not(.slidev-slide-container):not(#slide-container) {
  pointer-events: auto;
}

/* Hide toolbar in fullscreen (default Slidev behavior) */
body.impress-enabled:fullscreen #page-root {
  z-index: 0;
}
